<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart Chef - Recipe Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body.light-mode { background:#fff8f8; color:#111; }
    body.dark-mode { background:#111; color:#eee; }
    .recipe-card { background:white; border:1px solid #eee; border-radius:10px; padding:12px; margin-top:12px; }
    .recipe-card h3 { color:#e11d48; font-weight:bold; }
    button { background:#e11d48; color:white; padding:6px 12px; border-radius:6px; cursor:pointer; font-weight:600; }
    button:hover { background:#be123c; }
  </style>
</head>
<body class="light-mode">

  <!-- Header -->
  <header class="bg-red-600 text-white text-center p-4 text-xl font-bold">
    üë®‚Äçüç≥ Smart Chef
  </header>

  <!-- Main Container -->
  <div class="max-w-lg mx-auto p-4">

    <!-- Register Form -->
    <form id="registerForm" class="bg-white shadow-md rounded p-4 mt-6">
      <h2 class="text-xl font-bold mb-2">Register</h2>
      <div class="mb-2">
        <label>Username</label>
        <input type="text" id="regUsername" class="w-full border p-2 rounded" required>
      </div>
      <div class="mb-2">
        <label>Password</label>
        <input type="password" id="regPassword" class="w-full border p-2 rounded" required>
      </div>
      <button type="submit" class="mt-2">Register</button>
    </form>

    <!-- Login Form -->
    <form id="loginForm" class="bg-white shadow-md rounded p-4 mt-6 hidden">
      <h2 class="text-xl font-bold mb-2">Login</h2>
      <div class="mb-2">
        <label>Username</label>
        <input type="text" id="loginUsername" class="w-full border p-2 rounded" required>
      </div>
      <div class="mb-2">
        <label>Password</label>
        <input type="password" id="loginPassword" class="w-full border p-2 rounded" required>
      </div>
      <button type="submit" class="mt-2">Login</button>
    </form>

    <!-- Main App -->
    <div id="app" class="hidden">
      <!-- User Info + Logout -->
      <div class="flex justify-between items-center bg-white shadow p-3 rounded mt-4">
        <span class="font-bold text-red-600" id="userName"></span>
        <button id="logoutBtn" onclick="logoutUser()" style="font-size:14px; padding:4px 10px;">Logout</button>
      </div>

      <!-- Add Recipe -->
      <form id="recipeForm" class="bg-white shadow-md rounded p-4 mt-6">
        <h3 class="font-semibold mb-2">Add Recipe</h3>
        <input type="text" id="recipeName" placeholder="Recipe Name" class="w-full border p-2 mb-2 rounded" required>
        <input type="text" id="recipeIngredients" placeholder="Ingredients (comma separated)" class="w-full border p-2 mb-2 rounded" required>
        <textarea id="recipeSteps" placeholder="Steps (‚Üí separated)" class="w-full border p-2 mb-2 rounded" required></textarea>
        <button type="submit">Add Recipe</button>
      </form>

      <!-- Recipe List -->
      <div id="recipeList" class="mt-6"></div>
    </div>
  </div>

  <script>
    let currentUser = null;
    let recipes = [];

    // Register
    document.getElementById('registerForm').addEventListener('submit', function(e){
      e.preventDefault();
      const username = document.getElementById('regUsername').value.trim();
      const password = document.getElementById('regPassword').value.trim();
      if(localStorage.getItem('user_'+username)) {
        alert('Username already exists!');
        return;
      }
      localStorage.setItem('user_'+username, JSON.stringify({ username, password }));
      alert('Registration successful! Please login.');
      document.getElementById('registerForm').classList.add('hidden');
      document.getElementById('loginForm').classList.remove('hidden');
    });

    // Login
    document.getElementById('loginForm').addEventListener('submit', function(e){
      e.preventDefault();
      const username = document.getElementById('loginUsername').value.trim();
      const password = document.getElementById('loginPassword').value.trim();
      const storedUser = localStorage.getItem('user_'+username);
      if(!storedUser) { alert('User not found!'); return; }
      const userData = JSON.parse(storedUser);
      if(userData.password !== password) { alert('Incorrect password!'); return; }
      currentUser = { name: username, username };
      localStorage.setItem('currentUser', JSON.stringify(currentUser));
      recipes = JSON.parse(localStorage.getItem('recipes_'+username)) || [];
      loadApp();
    });

    // Load App
    function loadApp() {
      document.getElementById('userName').textContent = currentUser.name;
      document.getElementById('registerForm').classList.add('hidden');
      document.getElementById('loginForm').classList.add('hidden');
      document.getElementById('app').classList.remove('hidden');
      renderRecipes();
    }

    // Logout
    function logoutUser() {
      localStorage.removeItem('currentUser');
      location.reload();
    }

    // Render recipes
    function renderRecipes() {
      const list = document.getElementById('recipeList');
      list.innerHTML = '';
      recipes.forEach((r, index) => {
        const card = document.createElement('div');
        card.className = 'recipe-card';
        card.innerHTML = `
          <h3>${r.name}</h3>
          <p><strong>Ingredients:</strong> ${r.ingredients}</p>
          <p><strong>Steps:</strong> ${r.steps}</p>
          <button onclick="deleteRecipe(${index})">‚ùå Delete</button>
        `;
        list.appendChild(card);
      });
      localStorage.setItem('recipes_'+currentUser.username, JSON.stringify(recipes));
    }

    // Add recipe
    document.getElementById('recipeForm').addEventListener('submit', function(e){
      e.preventDefault();
      const name = document.getElementById('recipeName').value.trim();
      const ingredients = document.getElementById('recipeIngredients').value.trim();
      const steps = document.getElementById('recipeSteps').value.trim();
      recipes.push({ name, ingredients, steps });
      renderRecipes();
      this.reset();
    });

    // Delete recipe
    function deleteRecipe(index) {
      recipes.splice(index, 1);
      renderRecipes();
    }

    // Initialize
    (function(){
      let savedUser = localStorage.getItem('currentUser');
      if(savedUser){
        currentUser = JSON.parse(savedUser);
        recipes = JSON.parse(localStorage.getItem('recipes_'+currentUser.username)) || [];
        loadApp();
      }
    })();
  </script>
</body>
</html>
